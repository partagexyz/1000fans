## Private Fans Clubs on the NEAR Blockchain
1000fans is a token-gated content platform for artists, creators, producers, music labels and distributors to connect with their 1000 most dedicated fans. This platform provides fans with exclusive content, music and video players, link to private events and a private chat for fans and their favorite artist. All secured by crypto tokens technology.

The idea behind the name 1000fans is coming from a [2008 essay](https://kk.org/thetechnium/1000-true-fans/) saying that to make a living as an artist or a craftsperson, you don't need millions of clients or millions of fans. You need only a thousand of true fans, and create enough each year that you can earn $100 profit from each true fan.

An example of a deployed 1000fans fan club is available at https://theosis.1000fans.xyz

#### Repository content:
- a smart contract, written in rust, generated by "cargo near new contract" and stored in the /contract subfolder of the root folder 1000fans. 
- a frontend, written in javascript, generated by "npx create-near-app@latest" and stored in the /frontend subfolder of the root folder 1000fans.
- backend scripts, written in python, called metadata_extractor.py, upload.py, and chatHistory.py, and stored in the /scripts subfolder of the root folder 1000fans.
- an AWS s3 bucket, to store the shared content such as music, videos and other metadata files. In particular it contains audioMetadata.json, chatHistory.json, eventsMetadata.json, videoMetadata.json, nocoverfound.jpg (a default cover image when no album cover is found in the audio files' metadata), and the /music and /videos folders to store the audio and video files.

An automation is setup to scan for updates in the local folders frontend/public/music and frontend/public/videos once every 24 hours and update the AWS storage. 

### Technology Stack:
- **Blockchain**: NEAR Blockchain
- **Frontend**: JavaScript with the latest Next.js framework
- **Smart Contract**: A fan-token minter contract, limited to 1000 units.

### Frontend Features:
- **Homepage**: Contains cards to trigger widgets displaying the gated content.
- **Navigation Bar**: User authentication and link to web3 interaction console.
- **Footer**: Credits and dark/light toggle.

### Smart Contract Features: 
A smart contract to mint, transfer and check ownership of 1000 fans tokens (from fan000 to fan999). Any near wallet owner can buy tokens. Any token holder can offer their token for sale.

### Membership Verification:
Upon wallet connection, the platform checks for the presence of the valid membership token:
- **Valid Token**: Unlocks content.
- **Invalid Token**: Redirects to a membership purchase page.

### Gated Content Description:
- **Music Catalog**: Styled like a Spotify playlist, displaying tracks with artist names, song titles, and icons.
- **Video Catalog**: Mimics a YouTube channel interface with video previews, sortable by various filters for user convenience.
- **Event Catalog**: Features a calendar view and a carousel of upcoming events. Clicking an event card leads to a ticket purchase.
- **Chat Room**: Private p2p discussions between token holders and the content creator.

### Roadmap:
- ~~Build the frontend with Javascript, HTML and CSS.~~
- ~~Write the smart contract with Rust.~~
- ~~Deploy and test the smart contract on testnet.~~
- ~~Implement a "token check" in the wallet login.~~
- ~~Implement a shop to allow the mint and transfer of fans token. (route users based on wallet connect? and token ownership? action buttons and input fields on the shop UI.~~)
- ~~Update the smart contract: max 1 token per account, token count to automatically set the token ID: fan000, fan001, ..., fan999.~~ 
- ~~Redeploy the contract on a new account 1000fans.testnet. start from scratch with token fan000. re-test all access-keys etc.~~
- ~~Improve platform's design.~~
- ~~Add a private chat for fans.~~ ~~fix the chat history saving~~. 
- Smart-contract update:  ~~Allow multiple token holding~~. ~~Remove 1-year-holding-before-sale rule~~. Add a paiement system for token sale. Anyone can sell their tokens from their dashboard. add function listTokensForSale. Batch mint/transfer tokens. 
- Console update: no mint function for public: check ownership and "join the waitlist or check tokens for sale" or "offer your token for sale". display the text lower on the page to match background.
- Automate events from query to resident advisor API?
- Test the platform with a closed group of users on testnet.
- Update the platform on user feedback.
- Deploy the contract on mainnet.
- Automate cloning from main domain 1000fans.xyz

### Clone your own 1000fans - Step-by-Step Tutorial:

To clone and deploy your own version of 1000fans, follow these steps:

1. **Clone the Repository:**
```
git clone https://github.com/partagexyz/1000fans
cd 1000fans
```


2. **Setup the Smart Contract Environment:**

- Navigate to the contract directory:
  ```
  cd contract
  ```

- **Install Rust:**
  If you don't have Rust installed, follow the official installation guide:
  ```
  curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
  ```

- **Add WebAssembly Target:**
  ```
  rustup target add wasm32-unknown-unknown
  ```

- **Install NEAR CLI-RS:**
  ```
  curl --proto '=https' --tlsv1.2 -LsSf https://github.com/near/near-cli-rs/releases/latest/download/near-cli-rs-installer.sh | sh
  ```

- **Install cargo-near:**
  ```
  curl --proto '=https' --tlsv1.2 -LsSf https://github.com/near/cargo-near/releases/latest/download/cargo-near-installer.sh | sh
  ```

3. **Test and Deploy the Smart Contract:**

- Run tests for the smart contract:
  ```
  cargo test
  ```

- Create or login to a NEAR testnet account:
  ```
  near create-account <your-account-id.testnet> --useFaucet
  ```
  or
  ```
  near login
  ```

- Build your contract:
  ```
  cargo near build
  ```

- Deploy your contract:
  ```
  near deploy <created-account> ./target/near/athousandfans.wasm
  ```

4. **Setup and Run the Frontend:**

- Move to the frontend directory:
  ```
  cd ../frontend
  ```

- Install npm packages:
  ```
  npm install
  ```

- Build the project:
  ```
  npm run build
  ```

- Run the development server:
  ```
  npm run dev
  ```

- Access your local version of the platform via the URL provided in the console (usually `http://localhost:3000`).

5. **Configure AWS S3:**

- Ensure you have an AWS account and set up an S3 bucket for storing content. 
- Update the `.env` file or environment variables with your AWS credentials:
  ```
  AWS_ACCESS_KEY_ID=YOUR_ACCESS_KEY
  AWS_SECRET_ACCESS_KEY=YOUR_SECRET_KEY
  AWS_S3_BUCKET_NAME=YOUR_BUCKET_NAME
  ```
- Note: The automation script for updating AWS S3 should be set up manually or through CI/CD pipelines.

6. **Customization:**

- Modify the smart contract in `/contract` to fit your specific needs (e.g., token minting rules, event management).
- Update the frontend in `/frontend` to reflect your branding or additional features.

7. **Testing:**

- Test your deployment thoroughly, especially the interaction between the frontend and the smart contract.

8. **Deployment:**

- For production, consider deploying your frontend to a hosting service like Vercel or Netlify, which supports Next.js.
- Ensure your smart contract is deployed to the mainnet once you're ready to go live.

9. **Maintenance:**

- Keep your smart contract and frontend updated with the latest security patches and features.
- Monitor the use of tokens and manage your community's interactions.

This tutorial should give you a solid foundation to start your own token-gated fan club platform. Remember, blockchain development involves continuous learning and adaptation to the evolving tech landscape. Good luck!

